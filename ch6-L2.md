# درس ۲: فرمت‌های Quarto

## ۱.۲۹ مقدمه

تا اینجا، شما Quarto را برای تولید اسناد HTML دیده‌اید. این فصل یک مرور کلی مختصر از برخی از انواع دیگر خروجی‌هایی که می‌توانید با Quarto تولید کنید، ارائه می‌دهد.

دو روش برای تنظیم خروجی یک سند وجود دارد:

1. به طور دائمی، با تغییر سرصفحه YAML:

```yaml
title: "Diamond sizes"
format: html
```

2. به طور موقت، با فراخوانی دستی `quarto::quarto_render()`:

```r
quarto::quarto_render("diamond-sizes.qmd", output_format = "docx")
```

این کار مفید است اگر می‌خواهید به صورت برنامه‌نویسی چندین نوع خروجی تولید کنید زیرا آرگومان `output_format` می‌تواند یک لیست از مقادیر را نیز بپذیرد.

```r
quarto::quarto_render("diamond-sizes.qmd", output_format = c("docx", "pdf"))
```

## ۲.۲۹ گزینه‌های خروجی

Quarto طیف وسیعی از فرمت‌های خروجی را ارائه می‌دهد. می‌توانید لیست کامل را در https://quarto.org/docs/output-formats/all-formats.html پیدا کنید. بسیاری از فرمت‌ها برخی گزینه‌های خروجی را به اشتراک می‌گذارند (به عنوان مثال، `toc: true` برای گنجاندن فهرست مطالب)، اما برخی دیگر گزینه‌هایی دارند که به فرمت خاص هستند (به عنوان مثال، `code-fold: true` چانک‌های کد را در یک تگ `<details>` برای خروجی HTML جمع می‌کند تا کاربر بتواند آن را در صورت تقاضا نمایش دهد، که در اسناد PDF یا Word کاربرد ندارد).

برای لغو گزینه‌های پیش‌فرض، باید از یک فیلد `format` گسترده‌یافته استفاده کنید. به عنوان مثال، اگر می‌خواهید یک `html` با فهرست مطالب شناور رندر کنید، باید از این استفاده کنید:

```yaml
format:
  html:
    toc: true
    toc_float: true
```

حتی می‌توانید با ارائه لیستی از فرمت‌ها، به چندین خروجی رندر کنید:

```yaml
format:
  html:
    toc: true
    toc_float: true
  pdf: default
  docx: default
```

به نحو خاص (`pdf: default`) توجه کنید اگر نمی‌خواهید گزینه‌های پیش‌فرض را لغو کنید.

برای رندر کردن به تمام فرمت‌های مشخص‌شده در YAML یک سند، می‌توانید از `output_format = "all"` استفاده کنید.

```r
quarto::quarto_render("diamond-sizes.qmd", output_format = "all")
```

## ۳.۲۹ اسناد

فصل قبل بر خروجی پیش‌فرض `html` تمرکز داشت. چندین تنوع اساسی بر این موضوع وجود دارد که انواع مختلفی از اسناد تولید می‌کنند. به عنوان مثال:

- `pdf` یک PDF با LaTeX (یک سیستم چیدمان سند منبع باز) ایجاد می‌کند که باید آن را نصب کنید. RStudio در صورت عدم وجود آن، به شما اطلاع می‌دهد.
- `docx` برای اسناد Microsoft Word (`.docx`).
- `odt` برای اسناد OpenDocument Text (`.odt`).
- `rtf` برای اسناد Rich Text Format (`.rtf`).
- `gfm` برای یک سند GitHub Flavored Markdown (`.md`).
- `ipynb` برای Jupyter Notebooks (`.ipynb`).

به یاد داشته باشید، هنگام تولید یک سند برای به اشتراک‌گذاری با تصمیم‌گیرندگان، می‌توانید نمایش پیش‌فرض کد را با تنظیم گزینه‌های سراسری در YAML سند خاموش کنید:

```yaml
execute:
  echo: false
```

برای اسناد `html` گزینه دیگری این است که چانک‌های کد را به طور پیش‌فرض مخفی کنید، اما با یک کلیک قابل مشاهده باشند:

```yaml
format:
  html:
    code-fold: true
```

## ۴.۲۹ ارائه‌ها

همچنین می‌توانید از Quarto برای تولید ارائه‌ها استفاده کنید. کنترل بصری کمتری نسبت به ابزارهایی مانند Keynote یا PowerPoint خواهید داشت، اما درج خودکار نتایج کد R خود در یک ارائه می‌تواند زمان زیادی را صرفه‌جویی کند. ارائه‌ها با تقسیم محتوای شما به اسلایدها کار می‌کنند، با شروع یک اسلاید جدید در هر سرصفحه سطح دوم (`##`). علاوه بر این، سرصفحه‌های سطح اول (`#`) نشان‌دهنده شروع یک بخش جدید با یک اسلاید عنوان بخش هستند که به طور پیش‌فرض در وسط متمرکز می‌شود.

Quarto از انواع مختلفی از فرمت‌های ارائه پشتیبانی می‌کند، از جمله:

- `revealjs` - ارائه HTML با revealjs
- `pptx` - ارائه PowerPoint
- `beamer` - ارائه PDF با LaTeX Beamer

می‌توانید در مورد ایجاد ارائه‌ها با Quarto در https://quarto.org/docs/presentations بیشتر بخوانید.

## ۵.۲۹ تعامل‌پذیری

درست مانند هر سند HTML، اسناد HTML ایجاد‌شده با Quarto نیز می‌توانند شامل اجزای تعاملی باشند. در اینجا دو گزینه برای گنجاندن تعامل‌پذیری در اسناد Quarto خود معرفی می‌کنیم: htmlwidgets و Shiny.

### ۱.۵.۲۹ htmlwidgets

HTML یک فرمت تعاملی است و می‌توانید از آن تعامل‌پذیری با **htmlwidgets** استفاده کنید، توابع R که تجسم‌های HTML تعاملی تولید می‌کنند. به عنوان مثال، نقشه `leaflet` زیر را در نظر بگیرید. اگر این صفحه را در وب مشاهده می‌کنید، می‌توانید نقشه را بکشید، بزرگنمایی کنید و غیره. واضح است که نمی‌توانید این کار را در یک کتاب انجام دهید، بنابراین Quarto به طور خودکار یک اسکرین‌شات ثابت برای شما درج می‌کند.

```r
library(leaflet)
leaflet() |>
  setView(174.764, -36.877, zoom = 16) |> 
  addTiles() |>
  addMarkers(174.764, -36.877, popup = "Maungawhau") 
```

نکته عالی در مورد htmlwidgets این است که نیازی نیست چیزی درباره HTML یا JavaScript بدانید تا از آن‌ها استفاده کنید. تمام جزئیات در داخل بسته پیچیده شده است، بنابراین نیازی به نگرانی در مورد آن ندارید.

بسته‌های زیادی وجود دارند که htmlwidgets ارائه می‌دهند، از جمله:

- **dygraphs** برای تجسم‌های تعاملی سری‌های زمانی.
- **DT** برای جداول تعاملی.
- **threejs** برای نمودارهای سه‌بعدی تعاملی.
- **DiagrammeR** برای دیاگرام‌ها (مانند نمودارهای جریان و دیاگرام‌های ساده گره-پیوند).

برای کسب اطلاعات بیشتر در مورد htmlwidgets و مشاهده لیست کاملی از بسته‌هایی که آن‌ها را ارائه می‌دهند، به https://www.htmlwidgets.org مراجعه کنید.

### ۲.۵.۲۹ Shiny

htmlwidgets تعامل‌پذیری **سمت کلاینت** را فراهم می‌کنند — تمام تعامل‌پذیری در مرورگر، مستقل از R اتفاق می‌افتد. از یک طرف، این عالی است زیرا می‌توانید فایل HTML را بدون هیچ اتصالی به R توزیع کنید. با این حال، این اساساً آنچه می‌توانید انجام دهید را به چیزهایی که در HTML و JavaScript پیاده‌سازی شده‌اند محدود می‌کند. یک رویکرد جایگزین استفاده از **shiny** است، بسته‌ای که به شما امکان می‌دهد با استفاده از کد R، نه JavaScript، تعامل‌پذیری ایجاد کنید.

برای فراخوانی کد Shiny از یک سند Quarto، `server: shiny` را به سرصفحه YAML اضافه کنید:

```yaml
title: "Shiny Web App"
format: html
server: shiny
```

سپس می‌توانید از توابع "input" برای افزودن اجزای تعاملی به سند استفاده کنید:

```r
library(shiny)

textInput("name", "What is your name?")
numericInput("age", "How old are you?", NA, min = 0, max = 150)
```

و همچنین به یک چانک کد با گزینه چانک `context: server` نیاز دارید که حاوی کدی است که باید در یک سرور Shiny اجرا شود.

سپس می‌توانید با `input$name` و `input$age` به مقادیر ارجاع دهید، و کدی که از آن‌ها استفاده می‌کند هر بار که تغییر کنند به طور خودکار دوباره اجرا می‌شود.

ما نمی‌توانیم یک اپلیکیشن shiny زنده را در اینجا به شما نشان دهیم زیرا تعاملات shiny در **سمت سرور** اتفاق می‌افتند. این بدان معناست که می‌توانید بدون دانستن JavaScript، اپلیکیشن‌های تعاملی بنویسید، اما برای اجرای آن‌ها به یک سرور نیاز دارید. این یک مسئله لجستیکی را معرفی می‌کند: اپلیکیشن‌های Shiny برای اجرای آنلاین نیاز به یک سرور Shiny دارند. وقتی اپلیکیشن‌های Shiny را بر روی کامپیوتر خود اجرا می‌کنید، Shiny به طور خودکار یک سرور Shiny برای شما راه‌اندازی می‌کند، اما اگر می‌خواهید این نوع تعامل‌پذیری را به صورت آنلاین منتشر کنید، به یک سرور Shiny عمومی نیاز دارید. این تبادل بنیادی shiny است: می‌توانید در یک سند shiny هر کاری را که در R می‌توانید انجام دهید انجام دهید، اما به کسی نیاز دارد که R را اجرا کند.

برای یادگیری بیشتر درباره Shiny، توصیه می‌کنیم خواندن "Mastering Shiny" نوشته Hadley Wickham را در https://mastering-shiny.org.

## ۶.۲۹ وب‌سایت‌ها و کتاب‌ها

با کمی زیرساخت اضافی، می‌توانید از Quarto برای تولید یک وب‌سایت یا کتاب کامل استفاده کنید:

- فایل‌های `.qmd` خود را در یک دایرکتوری واحد قرار دهید. `index.qmd` به صفحه اصلی تبدیل خواهد شد.

- یک فایل YAML به نام `_quarto.yml` اضافه کنید که ناوبری برای سایت را فراهم می‌کند. در این فایل، نوع `project` را به `book` یا `website` تنظیم کنید، به عنوان مثال:

```yaml
project:
  type: book
```

به عنوان مثال، فایل `_quarto.yml` زیر یک وب‌سایت از سه فایل منبع ایجاد می‌کند: `index.qmd` (صفحه اصلی)، `viridis-colors.qmd` و `terrain-colors.qmd`.

```yaml
project:
  type: website

website:
  title: "A website on color scales"
  navbar:
    left:
      - href: index.qmd
        text: Home
      - href: viridis-colors.qmd
        text: Viridis colors
      - href: terrain-colors.qmd
        text: Terrain colors
```

فایل `_quarto.yml` که برای یک کتاب نیاز دارید ساختار بسیار مشابهی دارد. مثال زیر نشان می‌دهد که چگونه می‌توانید یک کتاب با چهار فصل ایجاد کنید که به سه خروجی مختلف (`html`، `pdf` و `epub`) رندر می‌شود. یک بار دیگر، فایل‌های منبع، فایل‌های `.qmd` هستند.

```yaml
project:
  type: book

book:
  title: "A book on color scales"
  author: "Jane Coloriste"
  chapters:
    - index.qmd
    - intro.qmd
    - viridis-colors.qmd
    - terrain-colors.qmd

format:
  html:
    theme: cosmo
  pdf: default
  epub: default
```

ما توصیه می‌کنیم که از یک پروژه RStudio برای وب‌سایت‌ها و کتاب‌های خود استفاده کنید. بر اساس فایل `_quarto.yml`، RStudio نوع پروژه‌ای را که روی آن کار می‌کنید تشخیص می‌دهد و یک تب Build به IDE اضافه می‌کند که می‌توانید از آن برای رندر و پیش‌نمایش وب‌سایت‌ها و کتاب‌های خود استفاده کنید. هم وب‌سایت‌ها و هم کتاب‌ها را می‌توان با استفاده از `quarto::quarto_render()` رندر کرد.

در مورد وب‌سایت‌های Quarto در https://quarto.org/docs/websites و در مورد کتاب‌ها در https://quarto.org/docs/books بیشتر بخوانید.

## ۷.۲۹ فرمت‌های دیگر

Quarto حتی فرمت‌های خروجی بیشتری ارائه می‌دهد:

- می‌توانید مقالات ژورنال را با استفاده از الگوهای ژورنال Quarto بنویسید: https://quarto.org/docs/journals/templates.html.

- می‌توانید اسناد Quarto را به Jupyter Notebooks با `format: ipynb` خروجی بگیرید: https://quarto.org/docs/reference/formats/ipynb.html.

- برای لیست فرمت‌های بیشتر به https://quarto.org/docs/output-formats/all-formats.html مراجعه کنید.

## ۸.۲۹ خلاصه

در این فصل، انواع گزینه‌ها را برای برقراری ارتباط نتایج خود با Quarto، از اسناد ثابت و تعاملی گرفته تا ارائه‌ها، وب‌سایت‌ها و کتاب‌ها، به شما ارائه دادیم.

برای یادگیری بیشتر در مورد ارتباط مؤثر در این فرمت‌های مختلف، منابع زیر را توصیه می‌کنیم:

- برای بهبود مهارت‌های ارائه خود، "Presentation Patterns" نوشته Neal Ford، Matthew McCollough و Nathaniel Schutta را امتحان کنید. این کتاب مجموعه‌ای از الگوهای مؤثر (هم سطح پایین و هم سطح بالا) را ارائه می‌دهد که می‌توانید برای بهبود ارائه‌های خود به کار ببرید.

- اگر سخنرانی‌های آکادمیک ارائه می‌دهید، ممکن است راهنمای گروه Leek برای ارائه سخنرانی‌ها را دوست داشته باشید.

- ما خودمان آن را نگرفته‌ایم، اما چیزهای خوبی در مورد دوره آنلاین Matt McGarrity در مورد سخنرانی عمومی شنیده‌ایم: https://www.coursera.org/learn/public-speaking.

- اگر داشبوردهای زیادی ایجاد می‌کنید، مطمئن شوید که "Information Dashboard Design: The Effective Visual Communication of Data" نوشته Stephen Few را بخوانید. این به شما کمک می‌کند داشبوردهایی ایجاد کنید که واقعاً مفید هستند، نه فقط زیبا به نظر می‌رسند.

- برقراری ارتباط مؤثر ایده‌های شما اغلب از برخی دانش طراحی گرافیک بهره می‌برد. "The Non-Designer's Design Book" نوشته Robin Williams یک مکان عالی برای شروع است.
